--- snap-0.9.0.1-orig/src/Snap/Snaplet/Internal/Initializer.hs	2012-06-19 01:00:51.000000000 +1000
+++ snap-0.9.0.1/src/Snap/Snaplet/Internal/Initializer.hs	2012-07-08 01:50:52.246927294 +1000
@@ -1,3 +1,4 @@
+{-# LANGUAGE CPP                        #-}
 {-# LANGUAGE OverloadedStrings          #-}
 {-# LANGUAGE BangPatterns               #-}
 
@@ -21,7 +22,11 @@
   , printInfo
   ) where
 
-import           Prelude hiding ((.), id, catch)
+import           Prelude hiding (
+#if !MIN_VERSION_base(4,6,0)
+                                 catch,
+#endif
+                                 id, (.))
 import           Control.Category
 import           Control.Concurrent.MVar
 import           Control.Exception (SomeException)
--- snap-0.9.0.1-orig/src/Snap/Snaplet/Internal/RST.hs	2012-06-19 01:00:51.000000000 +1000
+++ snap-0.9.0.1/src/Snap/Snaplet/Internal/RST.hs	2012-07-08 01:48:29.632306024 +1000
@@ -1,4 +1,5 @@
 {-# LANGUAGE BangPatterns               #-}
+{-# LANGUAGE CPP                        #-}
 {-# LANGUAGE FlexibleInstances          #-}
 {-# LANGUAGE MultiParamTypeClasses      #-}
 
@@ -9,7 +10,11 @@
 import           Control.Monad.CatchIO
 import           Control.Monad.Reader
 import           Control.Monad.State.Class
-import           Prelude hiding ((.), id, catch)
+import           Prelude hiding (
+#if !MIN_VERSION_base(4,6,0)
+                                 catch,
+#endif
+                                 id, (.))
 import           Snap.Core
 
 
--- snap-0.9.0.1-orig/src/Snap/Snaplet/Internal/Lensed.hs	2012-06-19 01:00:51.000000000 +1000
+++ snap-0.9.0.1/src/Snap/Snaplet/Internal/Lensed.hs	2012-07-08 01:49:53.327845322 +1000
@@ -1,3 +1,4 @@
+{-# LANGUAGE CPP #-}
 {-# LANGUAGE FlexibleInstances #-}
 {-# LANGUAGE MultiParamTypeClasses #-}
 
@@ -12,7 +13,11 @@
 import Control.Monad.State.Class
 import Control.Monad.State.Strict
 import Control.Category
-import Prelude hiding (catch, id, (.))
+import Prelude hiding (
+#if !MIN_VERSION_base(4,6,0)
+                       catch,
+#endif
+                       id, (.))
 import Snap.Core
 
 
--- snap-0.9.0.1-orig/src/Snap/Snaplet/Internal/LensT.hs	2012-06-19 01:00:51.000000000 +1000
+++ snap-0.9.0.1/src/Snap/Snaplet/Internal/LensT.hs	2012-07-08 01:49:41.092620355 +1000
@@ -1,4 +1,5 @@
 {-# LANGUAGE BangPatterns               #-}
+{-# LANGUAGE CPP                        #-}
 {-# LANGUAGE FlexibleInstances          #-}
 {-# LANGUAGE GeneralizedNewtypeDeriving #-}
 {-# LANGUAGE MultiParamTypeClasses      #-}
@@ -11,7 +12,11 @@
 import           Control.Monad.Reader
 import           Control.Monad.State.Class
 import           Data.Lens.Lazy
-import           Prelude hiding ((.), id, catch)
+import           Prelude hiding (
+#if !MIN_VERSION_base(4,6,0)
+                                 catch,
+#endif
+                                 id, (.))
 import           Snap.Core
 
 import           Snap.Snaplet.Internal.RST
--- snap-0.9.0.1-orig/snap.cabal	2012-06-19 01:00:51.000000000 +1000
+++ snap-0.9.0.1/snap.cabal	2012-07-08 01:03:37.003691926 +1000
@@ -120,7 +120,7 @@
     aeson                     >= 0.6      && < 0.7,
     attoparsec                >= 0.10     && < 0.11,
     base                      >= 4        && < 5,
-    bytestring                >= 0.9.1    && < 0.10,
+    bytestring                >= 0.9.1    && < 0.11,
     cereal                    >= 0.3      && < 0.4,
     clientsession             >= 0.7.3.6  && < 0.8,
     configurator              >= 0.1      && < 0.3,
@@ -138,7 +138,7 @@
     pwstore-fast              >= 2.2      && < 2.3,
     snap-core                 >= 0.9      && < 0.10,
     snap-server               >= 0.9      && < 0.10,
-    stm                       >= 2.2      && < 2.4,
+    stm                       >= 2.2      && < 2.5,
     syb                       >= 0.1      && < 0.4,
     template-haskell          >= 2.2      && < 2.8,
     text                      >= 0.11     && < 0.12,
@@ -185,7 +185,7 @@
 
   build-depends:
     base                >= 4       && < 5,
-    bytestring          >= 0.9.1   && < 0.10,
+    bytestring          >= 0.9.1   && < 0.11,
     containers          >= 0.3     && < 0.6,
     directory           >= 1.0     && < 1.2,
     directory-tree      >= 0.10    && < 0.11,
