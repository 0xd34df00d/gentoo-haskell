diff --git a/Config/Dyre/Paths.hs b/Config/Dyre/Paths.hs
index ad38d0a..1aaedc1 100644
--- a/Config/Dyre/Paths.hs
+++ b/Config/Dyre/Paths.hs
@@ -1,3 +1,4 @@
+{-# LANGUAGE CPP #-}
 module Config.Dyre.Paths where
 
 import System.Info                    (os, arch)
@@ -10,6 +11,18 @@ import Data.Time
 import Config.Dyre.Params
 import Config.Dyre.Options
 
+#if MIN_VERSION_directory(1,2,0)
+import Data.Time (UTCTime)
+#else
+import System.Time (ClockTime)
+#endif
+
+#if MIN_VERSION_directory(1,2,0)
+type DirectoryTime = UTCTime
+#else
+type DirectoryTime = ClockTime
+#endif
+
 -- | Return the paths to, respectively, the current binary, the custom
 --   binary, the config file, and the cache directory.
 getPaths :: Params c -> IO (FilePath, FilePath, FilePath, FilePath, FilePath)
@@ -33,7 +46,8 @@ getPaths params@Params{projectName = pName} = do
 
 -- | Check if a file exists. If it exists, return Just the modification
 --   time. If it doesn't exist, return Nothing.
-maybeModTime :: FilePath -> IO (Maybe UTCTime)
+
+maybeModTime :: FilePath -> IO (Maybe DirectoryTime)
 maybeModTime path = do
     fileExists <- doesFileExist path
     if fileExists
diff --git a/dyre.cabal b/dyre.cabal
index 7b9cea1..92d0bea 100644
--- a/dyre.cabal
+++ b/dyre.cabal
@@ -42,7 +42,7 @@ library
                    Config.Dyre.Compile,
                    Config.Dyre.Relaunch
   build-depends:   base >= 4 && < 5, process, filepath,
-                   directory, ghc-paths, time, binary,
+                   directory, ghc-paths, old-time, time, binary,
                    executable-path, xdg-basedir, io-storage
 
   if os(windows)
