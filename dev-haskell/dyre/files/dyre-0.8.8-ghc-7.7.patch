--- dyre-0.8.8-orig/dyre.cabal	2012-07-26 16:40:40.000000000 +1000
+++ dyre-0.8.8/dyre.cabal	2012-08-11 10:19:35.056060404 +1000
@@ -43,7 +43,7 @@
                    Config.Dyre.Relaunch
   build-depends:   base >= 4 && < 5, process, filepath,
                    directory, ghc-paths, old-time, binary,
-                   executable-path, xdg-basedir, io-storage
+                   executable-path, xdg-basedir, io-storage, time
 
   if os(windows)
       build-depends: Win32
--- dyre-0.8.8-orig/Config/Dyre/Options.hs	2012-07-26 16:40:40.000000000 +1000
+++ dyre-0.8.8/Config/Dyre/Options.hs	2012-08-11 09:44:42.992580851 +1000
@@ -52,7 +52,7 @@
     --   if it doesn't exist, we end up with the path to our current
     --   file. This seems like a sensible way to do it.
     -- Don't use 'getExecutablePath' if we're byassing the rest of Dyre.
-    this <- if check then getExecutablePath else getProgName
+    this <- if check then System.Environment.Executable.getExecutablePath else getProgName
     putValue "dyre" "masterBinary" this
     storeFlag args "--dyre-master-binary=" "masterBinary"
 
--- dyre-0.8.8-orig/Config/Dyre/Relaunch.hs	2012-07-26 16:40:40.000000000 +1000
+++ dyre-0.8.8/Config/Dyre/Relaunch.hs	2012-08-11 10:13:49.157158241 +1000
@@ -31,7 +31,7 @@
 import Data.Maybe           ( fromMaybe, fromJust )
 import System.IO            ( writeFile, readFile )
 import Data.Binary          ( Binary, encodeFile, decodeFile )
-import System.IO.Error      ( try )
+import Control.Exception    ( try, IOException )
 import System.FilePath      ( (</>) )
 import System.Directory     ( getTemporaryDirectory, removeFile )
 
@@ -99,7 +99,7 @@
          Nothing -> return d
          Just sp -> do
              stateData <- readFile sp
-             result <- try $ readIO stateData
+             result <- (try :: IO a -> IO (Either IOException a)) $ readIO stateData
              case result of
                   Left  _ -> return d
                   Right v -> return v
--- dyre-0.8.8-orig/Config/Dyre/Paths.hs	2012-07-26 16:40:40.000000000 +1000
+++ dyre-0.8.8/Config/Dyre/Paths.hs	2012-08-11 11:13:23.955207577 +1000
@@ -1,3 +1,4 @@
+{-# LANGUAGE CPP #-}
 module Config.Dyre.Paths where
 
 import System.Info
@@ -7,6 +8,11 @@
 import System.Environment.Executable
 import System.Environment.XDG.BaseDir
 
+#if (__GLASGOW_HASKELL__>=705)
+import Control.Monad (liftM)
+import Data.Time.Clock.POSIX (utcTimeToPOSIXSeconds)
+#endif
+
 import Config.Dyre.Params
 import Config.Dyre.Options
 
@@ -37,5 +43,9 @@
 maybeModTime path = do
     fileExists <- doesFileExist path
     if fileExists
+#if (__GLASGOW_HASKELL__>=705)
+       then getModificationTime path >>= (\x -> return $ Just $ TOD ((toEnum . fromEnum . utcTimeToPOSIXSeconds) x) 0)
+#else
        then fmap Just $ getModificationTime path
+#endif
        else return Nothing
