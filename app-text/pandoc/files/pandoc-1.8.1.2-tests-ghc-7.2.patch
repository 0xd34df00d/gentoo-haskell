diff --git a/pandoc.cabal b/pandoc.cabal
index 8da915c..eec0b86 100644
--- a/pandoc.cabal
+++ b/pandoc.cabal
@@ -196,7 +196,7 @@ Library
                  mtl >= 1.1 && < 2.1,
                  network >= 2 && < 2.4,
                  filepath >= 1.1 && < 1.3,
-                 process >= 1 && < 1.1,
+                 process >= 1 && < 1.2,
                  directory >= 1 && < 1.2,
                  bytestring >= 0.9 && < 1.0,
                  zip-archive >= 0.1.1.7 && < 0.2,
@@ -280,7 +280,7 @@ Executable pandoc
                  mtl >= 1.1 && < 2.1,
                  network >= 2 && < 2.4,
                  filepath >= 1.1 && < 1.3,
-                 process >= 1 && < 1.1,
+                 process >= 1 && < 1.2,
                  directory >= 1 && < 1.2,
                  bytestring >= 0.9 && < 1.0,
                  zip-archive >= 0.1.1.7 && < 0.2,
@@ -349,12 +349,12 @@ Executable test-pandoc
     else
       Ghc-Options:    -Wall
     Extensions:       CPP
-    Build-Depends:    base >= 4 && < 5, Diff, test-framework >= 0.3 && < 0.4,
+    Build-Depends:    base >= 4 && < 5, Diff, test-framework >= 0.3 && < 0.5,
                       test-framework-hunit >= 0.2 && < 0.3,
                       test-framework-quickcheck2 >= 0.2.9 && < 0.3,
                       QuickCheck >= 2.4 && < 2.6,
                       HUnit >= 1.2 && < 1.3,
-                      template-haskell >= 2.4 && < 2.6,
+                      template-haskell >= 2.4 && < 2.7,
                       ansi-terminal == 0.5.*
     Other-Modules:    Tests.Old
                       Tests.Helpers
@@ -366,3 +366,4 @@ Executable test-pandoc
                       Tests.Writers.Native
                       Tests.Writers.ConTeXt
                       Tests.Writers.HTML
+                      Tests.Writers.Markdown
diff --git a/src/Tests/Arbitrary.hs b/src/Tests/Arbitrary.hs
index 3949143..62a09f0 100644
--- a/src/Tests/Arbitrary.hs
+++ b/src/Tests/Arbitrary.hs
@@ -1,5 +1,6 @@
 {-# OPTIONS_GHC -fno-warn-orphans #-}
 {-# LANGUAGE TypeSynonymInstances #-}
+{-# LANGUAGE FlexibleInstances #-}
 -- provides Arbitrary instance for Pandoc types
 module Tests.Arbitrary ()
 where
diff --git a/src/Tests/Writers/Markdown.hs b/src/Tests/Writers/Markdown.hs
new file mode 100644
index 0000000..70266a6
--- /dev/null
+++ b/src/Tests/Writers/Markdown.hs
@@ -0,0 +1,34 @@
+{-# LANGUAGE OverloadedStrings, QuasiQuotes #-}
+module Tests.Writers.Markdown (tests) where
+
+import Test.Framework
+import Text.Pandoc.Builder
+import Text.Pandoc
+import Tests.Helpers
+import Tests.Arbitrary()
+
+markdown :: (ToString a, ToPandoc a) => a -> String
+markdown = writeMarkdown defaultWriterOptions . toPandoc
+
+{-
+  "my test" =: X =?> Y
+
+is shorthand for
+
+  test markdown "my test" $ X =?> Y
+
+which is in turn shorthand for
+
+  test markdown "my test" (X,Y)
+-}
+
+infix 5 =:
+(=:) :: (ToString a, ToPandoc a)
+     => String -> (a, String) -> Test
+(=:) = test markdown
+
+tests :: [Test]
+tests = [ "indented code after list"
+             =: (orderedList [ para "one" +++ para "two" ] +++ codeBlock "test")
+             =?> "1.  one\n\n    two\n\n<!-- -->\n\n    test"
+        ]
